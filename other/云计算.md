# 云计算服务工程师-相关知识

## 什么是云(服务)？

* 云服务是由**云服务提供商**（eg 华为云，腾讯云，亚马逊AWS，谷歌云）提供的**计算资源和服务**，包括存计算、存储、数据库、人工智能等。致力于为企业提供全栈、全场景的**云解决方案**。
  * 解决方案就是技术和服务组合。
* 用户可以直接按需使用这些资源，无需拥有物理硬件。
  * 优势：用户节约成本，降低初期投资和运维成本；还可以弹性扩展；高可用；快速部署；安全
  * 劣势：依赖网络；隐私问题（数据存储在云端）；长期成本；

---

* 计算：虚拟机、容器
* 存储：对象存储、文件存储
* 网络：虚拟网络、负载均衡器
* 数据库：关系型数据库(mysql, oracle), 非关系型数据库(redis, mongoDB)
* 人工智能服务：图像识别、deepseek、数字人f
* 安全：身份验证、数据加密、安全监控
* 大数据分析：数据处理、分析、可视化


Maas(Model-as-a-Service): 昇腾适配版DeepSeek-R1/V3


### 华为云与deepseek

#### ds历程

* 24/1发布ds-v1
* 24/12发布ds-v3 (671B)，仅55天训练，是gpt的1/10成本
* 25/1发布ds-R1 直接大火

ds的核心优势

* **低成本**：dsv3和gpt4性能差不多，但训练成本只占据1/10-1/20,
  * fp8混合精度训练，自研moe架构，以及很多技术创新(你看他开源周就知道了，很硬核)
* **性能好**：数学、代码等领域还是SOTA
* **开源**：所以各个云服务提供商也都搞上了

#### 基于华为云部署ds

1. 基于ollama（大概就是使用华为云的服务器，然后这个服务器里撞了ollama，再装ds吧
   1. 感觉卖的挺贵的（当然我不知道价格体系，只是我觉得，3k/month(32b)），而且还是32b版本
2. 基于华为云的ModelArts Studio大模型即服务平台 即**MaaS平台**
   1. 提供631B，提供200万token免费体验
   2. 可以**更灵活地按照时间/token计费，接口调用**，灵活扩容缩容
3. 基于CloudPond
   1. 数据本地化部署，保护数据隐私

#### ds应用

1. ds+RAG: 构建专业级RAG应用解决方案，可以直接把用户领域（政务/医疗）的数据塞进来，搜索增强
2. ds+Dify: 添加知识库 和 联网搜索，然后可以对接到metaStudio数字人（这数字人还挺好玩的，口型不错，形象形态端庄


## 什么是“云原生”技术

云原生（cloud-native），是一种**方法论**。**充分利用云计算、容器化和微服务架构等现代化技术来构建和运行应用程序**。强调应用的**灵活性、可扩展性、高可用性**。

> native can be translate to '原生', so bad.

核心特点：

* **微服务架构**：将应用拆分成小的独立的服务，每个服务执行特定功能，便于独立开发、部署和扩展。
* **容器化**：将**应用和依赖环境打包**成容器，然后可以**确保在任何云环境中都能一致运行**。
* **动态管理**：通过自动化工具（如Kubernetes）进行容器和服务的部署、管理和扩展。

## k8s/docker/普罗米修斯

* Docker：用于**构建、运行、传送**应用程序的轻量级平台。
* Kubernetes (K8s)：**自动化管理和编排容器**应用的开源平台。它帮助管理大规模的容器集群，确保高可用性和负载均衡。
* Prometheus：用于**监控和报警**的开源时间序列数据收集系统。

## Docker

### 什么是Docker

* Docker是一个应用 ==**打包、分发、部署**== 的工具
  * **打包**：软件运行需要的依赖、第三方库、软件打包为一个安装包
  * **分发**：把打包好的安装包上传到一个镜像仓库，他人可以方便获取安装
  * **部署**：拿到安装包就可以一个命令运行起来应用，自动模拟出一模一样的运行环境
* 可以理解为一个轻量的虚拟机，它只虚拟你软件需要的运行环境，多余的不要。而普通虚拟机(eg linux虚拟机 VM)则是一个庞大的系统，包含各种你不管你要不要的软件 

### Docker vs. Linux虚拟机

Docker轻快但隔离性弱，适合高效部署应用。VM稳重但资源重，适合需要完整系统隔离的场景。

1. 资源使用
   1. Docker基于容器技术，容器共享宿主os的内核，只打包应用和依赖，资源占用小，启动速度快（秒级）
   2. Linux VM通过虚拟化技术运行完整的os，每个VM有独立的os内核，资源占用大(内存)，启动慢（分钟级）
2. 隔离性
   1. docker容器之间共享内核，若内核有安全漏洞，可能影响所有容器
   2. Linux VM隔离型强，每个VM，互不干扰
3. 可移植性
   1. docker容器可以轻松打包并跨环境迁移（只要宿主系统兼容即可）
   2. Linux VM整个os难以迁移

### 基础

**镜像**(Image)：软件安装包，包含环境依赖
**容器**(Container)：软件安装后的状态，**容器是镜像的运行实例**。当你从一个镜像启动容器时，docker会在镜像的基础上创建一个容器，并将容器的文件系统、网络、环境变量等与宿主机隔离开来。不同容器之间隔离。

---

Docker安装镜像

* 安装最新版redis`docker run -d -p 6379:6379 --name redis redis:latest`
  * -d 后台
  * `-p 宿主机端口 : 容器内端口`: 将容器的6379**端口暴露**到宿主机的6379端口(容器是隔离环境，有自己的ip+port，不映射的话就访问不到应该)
  * --name 容器命名
  * `-v 数据卷名:容器内目录`：挂载目录，把宿主机目录(绝对路径)挂载到容器内目录
    * eg `-v D:/code/testcode_dir:/app`

---

制作自己的镜像

* `docker build -t name:version`
  * -t 设置镜像名称和版本号
  * 需要提前写好dockerfile

做好之后，别人就可以docker run了

---

Docker挂载目录

为何要挂载目录？

1. **数据持久化**：容器本身是临时的，停止或删除后内部数据都丢失了，而我们想持久化一些数据，eg 数据库数据文件、日志文件等，这时候我们就会挂载到宿主机的目录中
2. **共享文件/配置**：多个容器可以共享配置文件or资源

* `bind mount`: 直接把宿主机目录映射到容器内
* `volumn`: 由容器创建和管理，创建在宿主机，所以删除容器不会丢失，官方推荐

---

Docker多容器通信

---

![picture 0](../images/23b48f08bdb6899d8e30e50408f4df13bee28b8791d2c63a3c32176e746d8a2b.png)  


> 丢个图放这儿，DevOps全流程，了解了解，涉及到CICD，云计算，部署等

DevOps = Development + Operations 开发 + 运维
**DevOps强调CI/CD，通过自动化构建、测试和部署，确保快速和安全将代码推向生产环境。**
<!-- 
DevOps核心流程：

1. 规划plan：制定需求和计划
2. 编码code：开发人员写代码，使用git版本控制系统管理代码（含单元测试）
3. 构建build：将代码编译或打包为可执行文件，基于jenkins
4. 测试 -->

## Kubernetes

/ˌkjuːbərˈnɛtiːz/

k8s由google开源的**容器编排引擎**

